<!-- file: app/templates/reports/operator_performance.html -->
{% extends "base.html" %}
{% block title %}Отчет: Производительность операторов{% endblock %}
{% block content %}
<div class="header"><h1>Отчет: Производительность операторов</h1></div>
<div class="container">
    <p><a href="{{ url_for('admin.reports_index') }}">← Назад к выбору отчетов</a></p>

    <div class="card">
        <!-- ИЗМЕНЕНИЕ: Добавлен атрибут 'action' в тег form -->
        <form method="get" action="{{ url_for('admin.report_operator_performance') }}">
            <div style="display: flex; gap: 1rem; align-items: flex-end;">
                <div>
                    <label for="date_from">Дата с:</label>
                    <input type="date" id="date_from" name="date_from" value="{{ date_from }}">
                </div>
                <div>
                    <label for="date_to">Дата по:</label>
                    <input type="date" id="date_to" name="date_to" value="{{ date_to }}">
                </div>
                <button type="submit" class="button confirm">Сформировать</button>
            </div>
        </form>
    </div>

    <div class="card">
        <table>
            <thead>
                <tr>
                    <th>Оператор (ФИО)</th>
                    <th>Количество выполненных этапов</th>
                </tr>
            </thead>
            <tbody>
                {% for row in data %}
                <tr>
                    <td>{{ row.operator_name }}</td>
                    <td>{{ row.stages_completed }}</td>
                </tr>
                {% else %}
                <tr>
                    <td colspan="2" style="text-align: center;">Нет данных за выбранный период.</td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>
{% endblock %}